# SPEC-KANBAN-001: 수락 기준 (Acceptance Criteria)

## 메타데이터

| 항목 | 값 |
|------|-----|
| SPEC ID | SPEC-KANBAN-001 |
| 제목 | 칸반 보드 UI 수락 기준 |
| 생성일 | 2026-01-03 |
| 상태 | Planned |

---

## 1. 기능 수락 기준 (Given-When-Then)

### AC-001: 칸반 보드 기본 렌더링

**시나리오**: 프로젝트 선택 시 칸반 보드 표시

```gherkin
Given 사용자가 로그인되어 있고
  And 프로젝트가 1개 이상 존재할 때
When 사용자가 프로젝트를 선택하면
Then 4개의 컬럼이 가로로 배치되어야 한다
  And 컬럼 순서는 "Feature List", "Design Doc", "PRD", "Prototype" 이어야 한다
  And 각 컬럼 헤더에 태스크 수가 표시되어야 한다
```

### AC-002: 프로젝트 미선택 시 안내

```gherkin
Given 사용자가 애플리케이션에 접속했고
  And 현재 선택된 프로젝트가 없을 때
When 칸반 보드 영역을 확인하면
Then "프로젝트를 선택해주세요" 안내 메시지가 표시되어야 한다
```

### AC-003: 빈 프로젝트 안내

```gherkin
Given 사용자가 프로젝트를 선택했고
  And 해당 프로젝트에 태스크가 없을 때
When 칸반 보드가 렌더링되면
Then 빈 컬럼들이 표시되어야 한다
  And "태스크를 생성해주세요" 안내가 표시되어야 한다
```

### AC-004: 로딩 상태 표시

```gherkin
Given 사용자가 프로젝트를 선택했을 때
When 태스크 데이터를 로드하는 중이면
Then 스켈레톤 UI가 표시되어야 한다
  And 스켈레톤은 컬럼 구조를 유지해야 한다
```

---

### AC-005: 드래그 시작

**시나리오**: 카드 드래그 시작 시 시각적 피드백

```gherkin
Given 칸반 보드에 태스크 카드가 표시되어 있을 때
When 사용자가 카드를 8px 이상 드래그하면
Then 카드에 그림자 효과가 적용되어야 한다
  And 카드 투명도가 50%로 변경되어야 한다
  And 드래그 오버레이가 마우스 커서를 따라다녀야 한다
```

### AC-006: 드롭 가능 영역 표시

```gherkin
Given 사용자가 카드를 드래그하고 있을 때
When 카드가 다른 컬럼 위에 위치하면
Then 해당 컬럼에 하이라이트 효과가 표시되어야 한다
  And 하이라이트 색상은 파란색 계열이어야 한다
```

### AC-007: 드래그앤드롭으로 상태 변경

```gherkin
Given Feature List 컬럼에 "테스트 태스크" 카드가 있을 때
When 사용자가 해당 카드를 Design Doc 컬럼으로 드롭하면
Then 카드가 Design Doc 컬럼에 표시되어야 한다
  And 태스크 상태가 "design_doc"으로 변경되어야 한다
  And Feature List 컬럼의 태스크 수가 1 감소해야 한다
  And Design Doc 컬럼의 태스크 수가 1 증가해야 한다
```

### AC-008: 드래그 취소

```gherkin
Given 사용자가 카드를 드래그하고 있을 때
When 사용자가 ESC 키를 누르거나 원래 위치에 드롭하면
Then 카드가 원래 컬럼으로 돌아가야 한다
  And 상태 변경이 발생하지 않아야 한다
```

### AC-009: 상태 변경 실패 시 롤백

```gherkin
Given 사용자가 카드를 다른 컬럼으로 드롭했고
  And 서버 API 호출이 실패했을 때
When 에러 응답을 받으면
Then 카드가 원래 컬럼으로 롤백되어야 한다
  And "상태 변경에 실패했습니다" 에러 토스트가 표시되어야 한다
```

### AC-010: 같은 컬럼 내 드롭

```gherkin
Given 사용자가 같은 컬럼 내에서 카드를 드래그할 때
When 카드를 같은 컬럼의 다른 위치에 드롭하면
Then 카드 순서만 변경되어야 한다
  And 태스크 상태는 변경되지 않아야 한다
```

---

### AC-011: Feature List에서 Design Doc으로 이동 시 AI 트리거

**시나리오**: 순방향 이동 시 AI 문서 생성 트리거

```gherkin
Given Feature List 컬럼에 Feature List 내용이 작성된 태스크가 있을 때
When 사용자가 해당 태스크를 Design Doc 컬럼으로 이동하면
Then AI 설계문서 생성이 트리거되어야 한다
  And 해당 카드에 로딩 스피너가 표시되어야 한다
  And "AI가 설계문서를 생성하고 있습니다" 메시지가 표시되어야 한다
```

### AC-012: Design Doc에서 PRD로 이동 시 AI 트리거

```gherkin
Given Design Doc 컬럼에 설계문서가 완료된 태스크가 있을 때
When 사용자가 해당 태스크를 PRD 컬럼으로 이동하면
Then AI PRD 생성이 트리거되어야 한다
  And 해당 카드에 로딩 스피너가 표시되어야 한다
```

### AC-013: PRD에서 Prototype으로 이동 시 AI 트리거

```gherkin
Given PRD 컬럼에 PRD가 완료된 태스크가 있을 때
When 사용자가 해당 태스크를 Prototype 컬럼으로 이동하면
Then AI 프로토타입 생성이 트리거되어야 한다
  And 해당 카드에 로딩 스피너가 표시되어야 한다
```

### AC-014: AI 생성 완료

```gherkin
Given AI 문서 생성이 진행 중인 태스크가 있을 때
When AI 생성이 성공적으로 완료되면
Then 로딩 스피너가 사라져야 한다
  And 카드에 "완료" 배지가 표시되어야 한다
  And 문서 미리보기 버튼이 활성화되어야 한다
  And 성공 토스트가 표시되어야 한다
```

### AC-015: AI 생성 실패

```gherkin
Given AI 문서 생성이 진행 중인 태스크가 있을 때
When AI 생성이 실패하면
Then 로딩 스피너가 사라져야 한다
  And 카드에 "에러" 배지가 표시되어야 한다
  And "재시도" 버튼이 표시되어야 한다
  And 에러 토스트가 표시되어야 한다
```

### AC-016: 역방향 이동 시 AI 트리거 없음

```gherkin
Given PRD 컬럼에 태스크가 있을 때
When 사용자가 해당 태스크를 Design Doc 컬럼으로 이동하면
Then 상태만 변경되고 AI 트리거는 발생하지 않아야 한다
  And 기존 문서는 유지되어야 한다
```

### AC-017: Feature List 비어있을 때 AI 트리거 방지

```gherkin
Given Feature List가 비어있는 태스크가 있을 때
When 사용자가 해당 태스크를 Design Doc 컬럼으로 이동하려고 하면
Then "Feature List를 먼저 작성해주세요" 경고가 표시되어야 한다
  And 카드 이동이 취소되어야 한다
```

### AC-018: 기존 문서 덮어쓰기 확인

```gherkin
Given Design Doc이 이미 존재하는 태스크가 있을 때
When 사용자가 해당 태스크를 Feature List에서 Design Doc으로 다시 이동하면
Then "기존 문서를 덮어쓰시겠습니까?" 확인 다이얼로그가 표시되어야 한다
  And 사용자가 "확인"을 클릭하면 AI 생성이 트리거되어야 한다
  And 사용자가 "취소"를 클릭하면 이동이 취소되어야 한다
```

---

### AC-019: 카드 기본 정보 표시

**시나리오**: 카드에 태스크 정보 표시

```gherkin
Given 칸반 보드에 태스크가 있을 때
When 카드가 렌더링되면
Then 태스크 제목이 표시되어야 한다
  And 현재 단계 문서 존재 여부가 아이콘으로 표시되어야 한다
```

### AC-020: 참조 시스템 태그 표시

```gherkin
Given 태스크에 참조 시스템이 3개 설정되어 있을 때
When 카드가 렌더링되면
Then 3개의 참조 시스템 태그가 표시되어야 한다
  And 각 태그는 시스템 이름으로 표시되어야 한다
```

### AC-021: 참조 시스템 태그 초과 표시

```gherkin
Given 태스크에 참조 시스템이 5개 설정되어 있을 때
When 카드가 렌더링되면
Then 최대 3개의 참조 시스템 태그가 표시되어야 한다
  And "+2" 배지가 표시되어야 한다
```

### AC-022: 카드 클릭 시 상세 모달

```gherkin
Given 칸반 보드에 태스크 카드가 있을 때
When 사용자가 카드 본체를 클릭하면
Then 태스크 상세 모달이 열려야 한다
  And 모달에서 Feature List를 편집할 수 있어야 한다
```

### AC-023: 참조 태그 클릭 시 시스템 미리보기

```gherkin
Given 카드에 참조 시스템 태그가 있을 때
When 사용자가 참조 태그를 클릭하면
Then 해당 시스템 문서의 미리보기가 표시되어야 한다
  And 미리보기는 Markdown으로 렌더링되어야 한다
```

### AC-024: 문서 미리보기 버튼

```gherkin
Given 카드에 현재 단계 문서가 존재할 때
When 사용자가 문서 미리보기 버튼을 클릭하면
Then 해당 문서의 미리보기 모달이 열려야 한다
```

---

## 2. 비기능 수락 기준

### AC-025: 성능 - 태스크 로드

```gherkin
Given 프로젝트에 50개의 태스크가 있을 때
When 프로젝트를 선택하면
Then 태스크 목록이 500ms 이내에 로드되어야 한다
```

### AC-026: 성능 - 드래그 반응

```gherkin
Given 칸반 보드에 카드가 표시되어 있을 때
When 사용자가 카드를 드래그하기 시작하면
Then 100ms 이내에 드래그 UI가 활성화되어야 한다
```

### AC-027: 성능 - 드롭 후 업데이트

```gherkin
Given 사용자가 카드를 드래그하고 있을 때
When 사용자가 카드를 드롭하면
Then 200ms 이내에 UI가 업데이트되어야 한다
```

### AC-028: 반응형 레이아웃

```gherkin
Given 브라우저 너비가 1024px 이상일 때
When 칸반 보드가 렌더링되면
Then 4개 컬럼이 가로로 배치되어야 한다
  And 각 컬럼 최소 너비는 280px이어야 한다
```

### AC-029: 키보드 접근성

```gherkin
Given 칸반 보드에 카드가 있을 때
When 사용자가 Tab 키로 카드를 포커스하고
  And Space 키를 눌러 드래그 모드에 진입하고
  And 화살표 키로 이동 후 Enter로 드롭하면
Then 카드가 해당 위치로 이동해야 한다
```

### AC-030: 접근성 - 컨텍스트 메뉴

```gherkin
Given 드래그앤드롭이 어려운 사용자를 위해
When 사용자가 카드에서 우클릭 또는 메뉴 버튼을 클릭하면
Then 컨텍스트 메뉴가 표시되어야 한다
  And "이동" 하위 메뉴에서 컬럼을 선택할 수 있어야 한다
```

---

## 3. 품질 게이트

### QG-001: 테스트 커버리지

| 영역 | 목표 커버리지 |
|------|--------------|
| KanbanBoard.tsx | 85% 이상 |
| KanbanColumn.tsx | 85% 이상 |
| KanbanCard.tsx | 85% 이상 |
| taskStore.ts | 90% 이상 |

### QG-002: 린터 및 타입

- TypeScript 컴파일 에러: 0건
- ESLint 경고: 0건
- Prettier 포맷 일관성: 100%

### QG-003: 접근성

- ARIA 레이블 적용: 모든 인터랙티브 요소
- 키보드 네비게이션: 완전 지원
- 스크린 리더 호환: NVDA/VoiceOver 테스트 통과

---

## 4. 검증 방법

### 4.1 수동 테스트

| 테스트 ID | 설명 | 수행자 |
|-----------|------|--------|
| MT-001 | 4컬럼 레이아웃 확인 | QA |
| MT-002 | 드래그앤드롭 동작 확인 | QA |
| MT-003 | AI 트리거 시나리오 확인 | QA |
| MT-004 | 카드 정보 표시 확인 | QA |
| MT-005 | 접근성 테스트 (키보드) | QA |

### 4.2 자동화 테스트

| 테스트 유형 | 도구 | 범위 |
|------------|------|------|
| 단위 테스트 | Vitest | 컴포넌트, Store |
| 통합 테스트 | React Testing Library | 드래그앤드롭 플로우 |
| E2E 테스트 | Playwright (향후) | 전체 플로우 |

---

## 5. Definition of Done

SPEC-KANBAN-001이 완료되려면:

- [ ] 모든 AC (AC-001 ~ AC-030) 통과
- [ ] 테스트 커버리지 85% 이상
- [ ] TypeScript 컴파일 에러 0건
- [ ] ESLint 경고 0건
- [ ] 코드 리뷰 완료
- [ ] 수동 테스트 통과
- [ ] 문서 업데이트 완료

---

## 6. 추적성

### 6.1 SPEC 참조

- **spec.md**: 요구사항 정의
- **plan.md**: 구현 계획

### 6.2 요구사항 매핑

| 수락 기준 | 요구사항 |
|-----------|----------|
| AC-001 ~ AC-004 | FR-001 (칸반 보드 렌더링) |
| AC-005 ~ AC-010 | FR-002 (드래그앤드롭) |
| AC-011 ~ AC-018 | FR-003 (AI 트리거) |
| AC-019 ~ AC-024 | FR-004 (카드 정보 표시) |
| AC-025 ~ AC-030 | NFR-001, NFR-002, NFR-003 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| 1.0 | 2026-01-03 | 초안 작성 |
