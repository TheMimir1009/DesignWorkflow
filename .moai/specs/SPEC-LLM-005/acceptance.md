# SPEC-LLM-005: 인수 기준

## Overview

본 문서는 SPEC-LLM-005(칸반 컬럼별 LLM 설정 기능 개선)의 인수 기준을 정의합니다.

---

## 1. 테스트 시나리오 (Given-When-Then)

### TC-COLLLM-001: 컬럼별 설정 표시

**Given**: 사용자가 Design Doc 컬럼에 대해 GPT-4o를 설정한 상태
**When**: 사용자가 칸반 보드를 열면
**Then**: Design Doc 컬럼 헤더에 OpenAI 아이콘과 "GPT-4o" 텍스트가 표시되어야 한다

---

### TC-COLLLM-002: Feature List 컬럼 필터링

**Given**: Feature List 컬럼이 존재하는 상태
**When**: 사용자가 칸반 보드를 열면
**Then**: Feature List 컬럼 헤더에는 LLM 모델 정보가 표시되지 않아야 한다

---

### TC-COLLLM-003: 프로젝트 기본값 표시

**Given**: 사용자가 PRD 컬럼에 대해 별도 설정을 하지 않은 상태
**And**: 프로젝트 기본값이 Claude 3.5 Sonnet로 설정되어 있음
**When**: 사용자가 칸반 보드를 열면
**Then**: PRD 컬럼 헤더에 "기본값" 라벨이 표시되어야 한다

---

### TC-COLLLM-004: 컬럼 설정 변경 시 즉시 반영

**Given**: 사용자가 Prototype 컬럼의 LLM 설정 모달을 연 상태
**When**: 사용자가 프로바이더를 변경하고 저장하면
**Then**: 컬럼 헤더의 모델 정보가 즉시 변경되어야 한다

---

### TC-COLLLM-005: 설정 초기화 시 기본값 표시

**Given**: 사용자가 Design Doc 컬럼에 별도 LLM을 설정한 상태
**When**: 사용자가 설정 모달에서 "프로젝트 기본값 사용"을 선택하고 저장하면
**Then**: 컬럼 헤더에 "기본값" 라벨이 표시되어야 한다

---

### TC-COLLLM-006: 프로젝트 기본값 변경 시 반영

**Given**: PRD 컬럼이 프로젝트 기본값을 사용 중인 상태
**When**: 사용자가 프로젝트 설정에서 기본 LLM을 변경하면
**Then**: PRD 컬럼 헤더의 "기본값" 라벨이 새로운 기본 모델을 반영해야 한다

---

### TC-COLLLM-007: 모델 정보 클릭 시 모달 오픈

**Given**: 사용자가 칸반 보드를 보고 있는 상태
**When**: 사용자가 컬럼 헤더의 모델 정보 영역을 클릭하면
**Then**: 해당 컬럼의 LLM 설정 모달이 열려야 한다

---

### TC-COLLLM-008: 컬럼별 설정 우선순위

**Given**: PRD 컬럼에 별도 설정(Gemini Pro)이 존재하는 상태
**And**: 프로젝트 기본값이 GPT-4o로 설정되어 있음
**When**: 사용자가 칸반 보드를 열면
**Then**: PRD 컬럼 헤더에 Gemini Pro가 표시되어야 한다 (기본값 아님)

---

### TC-COLLLM-009: 로딩 상태 표시

**Given**: LLM 설정 정보를 아직 로드하지 않은 상태
**When**: 사용자가 칸반 보드를 열면
**Then**: 컬럼 헤더에 로딩 스피너가 표시되어야 한다

---

### TC-COLLLM-010: 미설정 상태 표시

**Given**: LLM 설정 정보를 가져오지 못한 상태
**When**: 사용자가 칸반 보드를 열면
**Then**: 컬럼 헤더에 "미설정" 상태가 표시되어야 한다

---

### TC-COLLLM-011: 모든 LLM 활성화 컬럼 표시

**Given**: 프로젝트에 3개의 LLM 활성화 컬럼이 존재하는 상태
**When**: 사용자가 칸반 보드를 열면
**Then**: Design Doc, PRD, Prototype 컬럼 모두에 모델 정보가 표시되어야 한다

---

### TC-COLLLM-012: 컬럼 헤더 공간 점유 검증

**Given**: 모델 정보가 긴 이름을 가진 상태 (예: "claude-opus-4-5-2025")
**When**: 사용자가 칸반 보드를 열면
**Then**: 모델 표시 영역이 컬럼 너비(288px)의 40% 이상을 차지하지 않아야 한다

---

### TC-COLLLM-013: 드래그 앤 드롭 방해 검증

**Given**: 컬럼 간 카드 드래그 중인 상태
**When**: 사용자가 모델 정보 영역 위로 드래그하면
**Then**: 드래그 동작이 중단되지 않고 정상적으로 완료되어야 한다

---

### TC-COLLLM-014: 레이아웃 겹침 방지

**Given**: 컬럼에 여러 카드가 존재하는 상태
**When**: 사용자가 칸반 보드를 스크롤하면
**Then**: 모델 표시 UI가 카드 영역을 가리거나 겹치지 않아야 한다

---

## 2. 품질 게이트 (Quality Gates)

### 기능적 요구사항

| 항목 | 검증 기준 | 상태 |
|------|-----------|------|
| 컬럼별 설정 표시 | 모든 LLM 활성화 컬럼에 모델 정보 표시 | [ ] |
| 기본값 표시 | 프로젝트 기본값 사용 시 "기본값" 라벨 표시 | [ ] |
| 설정 변경 반영 | 설정 변경 후 즉시 UI 갱신 | [ ] |
| 모달 오픈 | 클릭 시 설정 모달 오픈 | [ ] |
| 비활성 컬럼 필터링 | Feature List 컬럼에 모델 정보 미표시 | [ ] |

### 비기능적 요구사항

| 항목 | 검증 기준 | 상태 |
|------|-----------|------|
| 성능 | 모델 정보 렌더링 100ms 이내 | [ ] |
| 접근성 | 키보드 네비게이션 지원 | [ ] |
| 반응형 | 다양한 화면 크기에서 정상 표시 | [ ] |
| 회귀 | 기존 드래그 앤 드롭 기능 정상 | [ ] |

### 시각적 요구사항

| 항목 | 검증 기준 | 상태 |
|------|-----------|------|
| 프로바이더 아이콘 | 각 프로바이더 고유 아이콘 표시 | [ ] |
| 색상 구분 | 프로바이더별 색상 적용 | [ ] |
| 로딩 상태 | 로딩 스피너 표시 | [ ] |
| 에러 상태 | "미설정" 메시지 표시 | [ ] |

---

## 3. 사용자 승인 테스트 (UAT)

### 시나리오 1: 일반 사용자

**목적**: 일반적인 사용 흐름에서 기능 검증

1. 칸반 보드 열기
2. 각 컬럼의 모델 정보 확인
3. 설정 변경 후 재확인
4. 기본값 사용 확인

**예상 결과**: 모든 단계에서 올바른 모델 정보 표시

### 시나리오 2: 신규 사용자

**목적**: 처음 접하는 사용자의 이해도 검증

1. 프로젝트 생성 (기본 설정)
2. 칸반 보드 확인
3. 모델 정보 클릭
4. 설정 변경

**예상 결과**: 직관적인 UI로 어려움 없이 사용 가능

### 시나리오 3: 고급 사용자

**목적**: 다양한 설정 조합 검증

1. 각 컬럼별 다른 프로바이더 설정
2. 일부 컬럼만 기본값 사용
3. 프로젝트 기본값 변경
4. 혼합 상태 확인

**예상 결과**: 모든 조합에서 올바른 표시

---

## 4. 버그 보고서 템플릿

```
버그 ID: BUG-COLLLM-XXX
발견일: YYYY-MM-DD
발견자: [이름]

[요약]
한 줄 요약

[재현 단계]
1. ...
2. ...

[기대 결과]
예상되는 동작

[실제 결과]
실제 발생한 문제

[환경]
- 브라우저:
- OS:
- 프로젝트 설정:

[심각도]
Critical / High / Medium / Low
```

---

## 5. 승인 서명

| 역할 | 이름 | 서명 | 날짜 |
|------|------|------|------|
| Product Owner | | ________________ | ____-__-__ |
| 개발 책임자 | | ________________ | ____-__-__ |
| QA 책임자 | | ________________ | ____-__-__ |

---

## 6. Definition of Done 확인리스트

### 코드 품질
- [ ] Pull Request 생성 및 리뷰 완료
- [ ] 코드 컨벤션 준수 (ESLint 통과)
- [ ] TypeScript 타입 오류 없음
- [ ] 테스트 커버리지 80% 이상

### 기능 완료
- [ ] 모든 필수 요구사항 구현
- [ ] 모든 테스트 시나리오 통과
- [ ] UAT 통과

### 문서
- [ ] 코드 주석 완료
- [ ] API 문서 업데이트 (필요 시)
- [ ] CHANGELOG 업데이트

### 배포 준비
- [ ] 프로덕션 빌드 성공
- [ ] 배포 계획 수립
- [ ] 롤백 계획 준비
